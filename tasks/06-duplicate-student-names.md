# –ó–∞–¥–∞—á–∞ 6: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω —É—á–µ–Ω–∏–∫–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ drafts –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω:
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ "–£—á–µ–Ω–∏–∫ 1" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –µ—â–µ –æ–¥–Ω–æ–≥–æ "–£—á–µ–Ω–∏–∫ 1"
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–º–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω

## –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
–í `lib/drafts.ts:157-173` —Ñ—É–Ω–∫—Ü–∏—è `generateUniqueStudentName`:
```tsx
function generateUniqueStudentName(checkId: string, existingStudents: DraftStudent[]): string {
  const existingNames = new Set(existingStudents.map(s => s.name.toLowerCase()))

  // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç failed submissions –∏–∑ temp storage
  const tempFailedNames = getTempFailedNames(checkId)
  tempFailedNames.forEach(name => existingNames.add(name.toLowerCase()))

  // ... –≥–µ–Ω–µ—Ä–∞—Ü–∏—è "–£—á–µ–Ω–∏–∫ N"
}
```

–ù–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ submissions –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `lib/drafts.ts` (—Å—Ç—Ä–æ–∫–∏ 157-200)
- `components/camera/CameraWorkInterface.tsx` (–ª–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤)
- –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å API endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–µ–Ω

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 6.1 –£–ª—É—á—à–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–º–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∏–º–µ–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–º–µ–Ω
- –£—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏: drafts + temp failed + DB submissions

### 6.2 API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–µ–Ω
```tsx
// GET /api/checks/[id]/student-names
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { existingNames: string[] }
```

### 6.3 –õ–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
```tsx
async function generateUniqueStudentName(checkId: string, existingStudents: DraftStudent[]): Promise<string> {
  const [draftNames, tempFailedNames, dbNames] = await Promise.all([
    existingStudents.map(s => s.name),
    getTempFailedNames(checkId),
    fetchExistingNamesFromDB(checkId)
  ])

  const allNames = new Set([...draftNames, ...tempFailedNames, ...dbNames].map(n => n.toLowerCase()))

  let counter = 1
  while (allNames.has(`—É—á–µ–Ω–∏–∫ ${counter}`)) {
    counter++
  }

  return `–£—á–µ–Ω–∏–∫ ${counter}`
}
```

### 6.4 UI —É–ª—É—á—à–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∏–º–µ–Ω–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –¥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
üü¢ –°–†–ï–î–ù–ò–ô - —É–ª—É—á—à–∞–µ—Ç UX –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —É—á–µ–Ω–∏–∫–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É drafts –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ submissions
- –ü–æ–Ω—è—Ç–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è