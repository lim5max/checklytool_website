# –ó–∞–¥–∞—á–∞ 5: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ, —Å–∏—Å—Ç–µ–º–∞ –∑–∞–Ω–æ–≤–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤, –≤–∫–ª—é—á–∞—è —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –õ–∏—à–Ω–∏–º –∑–∞—Ç—Ä–∞—Ç–∞–º –Ω–∞ –ò–ò
- –£–≤–µ–ª–∏—á–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫

## –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
–í `app/api/submissions/[id]/evaluate/route.ts:113-126` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å submission:
```tsx
if (submissionData.status === 'processing') {
  return NextResponse.json({ error: 'Submission is already being processed' }, { status: 409 })
}

if (submissionData.status === 'completed') {
  return NextResponse.json({ error: 'Submission already evaluated' }, { status: 409 })
}
```

–ù–æ —ç—Ç–æ –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö submissions.

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `app/api/submissions/[id]/evaluate/route.ts`
- `app/dashboard/checks/[id]/submit/page.tsx` (–ª–æ–≥–∏–∫–∞ batch submission)
- `components/camera/CameraWorkInterface.tsx` (workflow –æ—Ç–ø—Ä–∞–≤–∫–∏)

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 5.1 API —É–ª—É—á—à–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º batch –æ—Ü–µ–Ω–∫–∏
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å submissions —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'completed'
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö submissions

### 5.2 Frontend –ª–æ–≥–∏–∫–∞
```tsx
const submissionsToEvaluate = submissions.filter(sub =>
  sub.status === 'pending' || sub.status === 'failed'
)

// –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –æ—Ü–µ–Ω–∫—É —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ/–Ω–µ—É–¥–∞—á–Ω—ã–µ
const evaluationPromises = submissionsToEvaluate.map(submission =>
  fetch(`/api/submissions/${submission.id}/evaluate`, { method: 'POST' })
)
```

### 5.3 UI –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö —Ä–∞–±–æ—Ç –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ
- "–û—Ç–ø—Ä–∞–≤–∏—Ç—å 2 –Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É" –≤–º–µ—Å—Ç–æ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å 5 —Ä–∞–±–æ—Ç"
- –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö: "3 —Ä–∞–±–æ—Ç—ã —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã"

### 5.4 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è batch –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö submissions
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —É—á–∏—Ç—ã–≤–∞—é—â–∏–π —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
üü° –í–´–°–û–ö–ò–ô - —ç–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –û—Ü–µ–Ω–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö submissions
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ß–µ—Ç–∫–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –≠–∫–æ–Ω–æ–º–∏—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ò–ò-–∞–Ω–∞–ª–∏–∑