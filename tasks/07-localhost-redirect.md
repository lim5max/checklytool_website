# –ó–∞–¥–∞—á–∞ 7: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ localhost —Å –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–µ–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω–æ–≥–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ localhost, —Ö–æ—Ç—è —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏ —Ç–∞–∫–æ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å.

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã
1. **Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `output: "standalone"`
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `NEXTAUTH_URL` –∏–ª–∏ `NEXT_PUBLIC_SITE_URL`
3. **SSR/SSG –ø—Ä–æ–±–ª–µ–º—ã**: —Ä–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É server –∏ client URL
4. **Middleware**: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –§–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- `next.config.ts` (—Å—Ç—Ä–æ–∫–∏ 3-4)
- `.env` —Ñ–∞–π–ª—ã (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- `middleware.ts`
- `lib/auth.ts` (NextAuth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
`next.config.ts`:
```tsx
const nextConfig: NextConfig = {
  output: "standalone",
  images: { unoptimized: true },
  trailingSlash: false,
  serverExternalPackages: [],
}
```

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 7.1 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `NEXTAUTH_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ production
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `NEXT_PUBLIC_SITE_URL` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ
- –î–æ–±–∞–≤–∏—Ç—å logging –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ URL —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è

### 7.2 Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```tsx
const nextConfig: NextConfig = {
  output: "standalone",
  images: { unoptimized: true },
  trailingSlash: false,

  // –î–æ–±–∞–≤–∏—Ç—å explicit configuration
  publicRuntimeConfig: {
    siteUrl: process.env.NEXT_PUBLIC_SITE_URL || process.env.VERCEL_URL
  },

  // –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –±–∞–∑–æ–≤–æ–º –ø—É—Ç–∏
  basePath: process.env.NODE_ENV === 'production' ? undefined : undefined,
}
```

### 7.3 Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ middleware
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å User-Agent –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ redirects –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### 7.4 Auth –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NextAuth callbacks
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ redirect URLs –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ
- –î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è production URLs

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –¢–µ—Å—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏ (Safari, Chrome Mobile)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ dev vs production —Ä–µ–∂–∏–º–∞—Ö

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –Ω–∞ localhost
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è deployment